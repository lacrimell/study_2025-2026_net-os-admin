---
# Preamble

## Author
author:
  name: Калашникова Ольга Сергеевна
  email: 1132231846@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: Презентация по лабораторной работе №3
subtitle: Администрирование сетевых подсистем
license: CC BY
date: 2025-12-18

## Generic options
lang: ru-RU
crossref:
  lof-title: Список иллюстраций
  lot-title: Список таблиц
  lol-title: Листинги

## Fonts 
mainfont: Liberation Serif
romanfont: Liberation Serif
sansfont: Liberation Sans
monofont: Liberation Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9

## Formats
format:
### Pdf output format
  beamer:
    toc: true
    toc-title: Содержание
    number-sections: true
    colorlinks: false
    toc-depth: 2
    slide_level: 2
    aspectratio: 169
    section-titles: true
    theme: metropolis
    themeoptions: progressbar=frametitle,sectionpage=progressbar,numbering=fraction
    pdf-engine: xelatex
    fontenc: T2A
#### Language
    babel-lang: russian
    babel-otherlangs: english

### Html output
  revealjs:
    transition: slide
    margin: 0.2
    smaller: false
    output-ext: html
    theme: beige
    logo: _resources/image/logo_rudn.png
---

# Вступительная часть

## Цель работы

Целью данной работы является приобретение практических навыков по установке и конфигурированию DHCP-сервера, а также настройке интеграции DHCP с DNS через механизм динамического обновления (DDNS).

# Выполнение лабораторной работы

## Установка DHCP-сервера Kea

Установка пакета kea (DHCP-сервер) на виртуальной машине server:

![Установка kea](image/2.png){#fig-002 width=80%}

## Конфигурирование DHCP-сервера

Создание резервной копии конфигурационного файла DHCP-сервера:

![Создание резервной копии конфигурационного файла](image/3.png){#fig-003 width=80%}

## Настройка опций DHCP

Настройка опций domain-name и domain-search для домена oskalashnikova.net:

![Настройка опций DHCP](image/4.png){#fig-004 width=80%}

## Настройка подсети DHCP

Конфигурация подсети 192.168.1.0/24 с диапазоном адресов 192.168.1.30-199:

![Настройка подсети DHCP](image/5.png){#fig-005 width=80%}

## Настройка интерфейсов DHCP

Указание интерфейса eth1 для прослушивания DHCP-запросов:

![Настройка интерфейсов DHCP](image/6.png){#fig-006 width=80%}

## Проверка конфигурации DHCP

Проверка корректности конфигурационного файла kea-dhcp4.conf:

![Проверка конфигурации DHCP](image/7.png){#fig-007 width=80%}

## Включение автозагрузки DHCP

Включение автозагрузки и запуска службы kea-dhcp4:

![Включение автозагрузки DHCP-сервера](image/8.png){#fig-008 width=80%}

## Настройка DNS-записей

Добавление записи для DHCP-сервера в прямую DNS-зону:

![Прямая зона DNS](image/9.png){#fig-009 width=80%}

## Обновление DNS-зоны

Обновление файла прямой зоны с увеличением серийного номера:

![Обновлённая прямая зона DNS](image/10.png){#fig-010 width=80%}

## Настройка обратной DNS-зоны

Добавление PTR-записи в обратную зону DNS:

![Обратная зона DNS](image/11.png){#fig-011 width=80%}

## Перезапуск DNS-сервера

Перезапуск службы named для применения изменений:

![Перезапуск named](image/12.png){#fig-012 width=80%}

## Проверка DNS-разрешения

Проверка разрешения имени DHCP-сервера через ping:

![Пинг DHCP-сервера по имени](image/13.png){#fig-013 width=80%}

## Настройка межсетевого экрана

Добавление службы dhcp в firewalld:

![Настройка firewalld для DHCP](image/14.png){#fig-014 width=80%}

## Восстановление контекста SELinux

Восстановление контекста безопасности SELinux для конфигурационных файлов:

![Восстановление контекста SELinux](image/15.png){#fig-015 width=80%}

## Запуск DHCP-сервера

Запуск службы kea-dhcp4 и начало работы DHCP-сервера:

![Запуск DHCP-сервера](image/16.png){#fig-016 width=80%}

## Настройка клиента

Создание скрипта маршрутизации для клиента 01-routing.sh:

![Скрипт маршрутизации клиента](image/17.png){#fig-017 width=80%}

## Интеграция скрипта в Vagrant

Подключение скрипта маршрутизации в Vagrantfile:

![Подключение скрипта в Vagrantfile](image/18.png){#fig-018 width=80%}

## Настройка DDNS: создание TSIG-ключа

Создание TSIG-ключа для безопасного обновления DNS:

![Создание TSIG-ключа](image/22.png){#fig-019 width=80%}

## Содержимое TSIG-ключа

Содержимое файла dhcp_updater.key:

![Содержимое файла dhcp_updater.key](image/23.png){#fig-020 width=80%}

## Настройка прав доступа для ключей

Изменение владельца директории с ключами на named:

![Изменение владельца директории ключей](image/24.png){#fig-021 width=80%}

## Конфигурация named для DDNS

Добавление включений для TSIG-ключа в named.conf:

![Конфигурация named.conf](image/25.png){#fig-022 width=80%}

## Политики обновления DNS-зон

Настройка политик обновления для прямой и обратной зон:

![Конфигурация зоны с политиками обновления](image/26.png){#fig-023 width=80%}

## Проверка конфигурации DNS

Проверка корректности конфигурации DNS-сервера:

![Проверка конфигурации named](image/27.png){#fig-024 width=80%}

## Перезапуск DNS-сервера

Перезапуск службы named для применения настроек DDNS:

![Перезапуск named](image/28.png){#fig-025 width=80%}

## Настройка Kea для DDNS

Создание файла TSIG-ключей для Kea в формате JSON:

![Файл tsig-keys.json](image/29.png){#fig-026 width=80%}

## Настройка прав доступа

Изменение владельца и прав доступа для tsig-keys.json:

![Изменение владельца tsig-keys.json](image/30.png){#fig-027 width=80%}
![Настройка прав доступа для tsig-keys.json](image/31.png){#fig-028 width=80%}

## Конфигурация службы DDNS

Конфигурационный файл kea-dhcp-ddns.conf:

![Конфигурационный файл kea-dhcp-ddns.conf](image/32.png){#fig-029 width=80%}

## Настройка владельца конфигурации

Изменение владельца файла конфигурации DDNS:

![Изменение владельца kea-dhcp-ddns.conf](image/33.png){#fig-030 width=80%}

## Проверка конфигурации DDNS

Проверка синтаксиса конфигурационного файла DDNS:

![Проверка конфигурации DDNS](image/34.png){#fig-031 width=80%}

## Запуск службы DDNS

Включение и запуск службы kea-dhcp-ddns:

![Запуск службы kea-dhcp-ddns](image/35.png){#fig-032 width=80%}

## Проверка статуса DDNS

Проверка статуса службы DDNS:

![Статус службы kea-dhcp-ddns](image/36.png){#fig-033 width=80%}

## Интеграция DHCP с DDNS

Добавление настроек DDNS в конфигурацию DHCP:

![Добавление настроек DDNS в kea-dhcp4.conf](image/37.png){#fig-034 width=80%}

## Проверка обновлённой конфигурации

Проверка конфигурации DHCP после добавления DDNS:

![Проверка обновлённой конфигурации DHCP](image/38.png){#fig-035 width=80%}

## Перезапуск DHCP-сервера

Перезапуск службы kea-dhcp4 для применения изменений:

![Перезапуск службы kea-dhcp4](image/39.png){#fig-036 width=80%}

## Проверка статуса DHCP

Проверка статуса службы DHCP после перезапуска:

![Статус службы kea-dhcp4 после перезапуска](image/40.png){#fig-037 width=80%}

## Настройка клиента для DHCP

Настройка сетевого интерфейса клиента для получения адреса:

![Настройка интерфейса eth1 на клиенте](image/50.png){#fig-038 width=80%}

## Проверка конфигурации клиента

Проверка IP-адреса, полученного клиентом:

![Проверка конфигурации интерфейса eth1](image/51.png){#fig-039 width=80%}

## Корректная настройка интерфейса

Настройка интерфейса eth2 для работы с DHCP:

![Успешная настройка интерфейса eth2](image/55.png){#fig-040 width=80%}

## Проверка работы DHCP

Проверка базы данных аренд DHCP на сервере:

![Проверка базы данных аренд DHCP](image/56.png){#fig-041 width=80%}

## Проверка работы DDNS

Проверка статуса службы DDNS и журнала ошибок:

![Статус службы DDNS с ошибками](image/57.png){#fig-042 width=80%}

## Создание журнального файла DDNS

Проверка наличия журнального файла обновлений DNS:

![Проверка журнального файла DDNS](image/66.png){#fig-043 width=80%}

## Тестирование DNS-разрешения

Проверка DNS-запросов с клиента:

![Ошибка DNS-запроса](image/67.png){#fig-044 width=80%}

## Переподключение клиента

Переподключение клиента для повторного получения адреса:

![Переподключение клиента](image/65.png){#fig-045 width=80%}

## Автоматизация развёртывания

Копирование конфигурационных файлов DHCP для автоматизации:

![Копирование конфигурационных файлов DHCP](image/68.png){#fig-046 width=80%}

## Копирование конфигураций DNS

Копирование конфигурационных файлов DNS:

![Копирование конфигурационных файлов DNS](image/69.png){#fig-047 width=80%}

## Создание скрипта автоматизации

Создание скрипта dhcp.sh для автоматической настройки:

![Создание скрипта dhcp.sh](image/70.png){#fig-048 width=80%}

## Содержимое скрипта автоматизации

Содержимое скрипта dhcp.sh для развёртывания DHCP:

![Содержимое скрипта dhcp.sh](image/71.png){#fig-049 width=80%}

## Интеграция в Vagrant

Интеграция скрипта в Vagrantfile для автоматического выполнения:

![Интеграция скрипта в Vagrantfile](image/72.png){#fig-050 width=80%}

# Завершение

## Выводы

В ходе выполнения лабораторной работы №3 были успешно выполнены основные задачи по настройке DHCP-сервера Kea и интеграции его с DNS через механизм динамического обновления.
