---
# Preamble

## Author
author:
  name: Калашникова Ольга Сергеевна
  email: 1132231846@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: Презентация по лабораторной работе №2
subtitle: Администрирование сетевых подсистем
license: CC BY
date: 2025-12-18

## Generic options
lang: ru-RU
crossref:
  lof-title: Список иллюстраций
  lot-title: Список таблиц
  lol-title: Листинги

## Fonts 
mainfont: Liberation Serif
romanfont: Liberation Serif
sansfont: Liberation Sans
monofont: Liberation Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9

## Formats
format:
### Pdf output format
  beamer:
    toc: true
    toc-title: Содержание
    number-sections: true
    colorlinks: false
    toc-depth: 2
    slide_level: 2
    aspectratio: 169
    section-titles: true
    theme: metropolis
    themeoptions: progressbar=frametitle,sectionpage=progressbar,numbering=fraction
    pdf-engine: xelatex
    fontenc: T2A
#### Language
    babel-lang: russian
    babel-otherlangs: english

### Html output
  revealjs:
    transition: slide
    margin: 0.2
    smaller: false
    output-ext: html
    theme: beige
    logo: _resources/image/logo_rudn.png
---

# Вступительная часть

## Цель работы

Целью данной работы является приобретение практических навыков по установке и конфигурированию DNS-сервера, усвоение принципов работы системы доменных имён.

## Задание лабораторной работы

1. Установить на виртуальной машине server DNS-сервер bind и bind-utils
2. Сконфигурировать на виртуальной машине server кэширующий DNS-сервер
3. Сконфигурировать на виртуальной машине server первичный DNS-сервер
4. При помощи утилит dig и host проанализировать работу DNS-сервера
5. Написать скрипт для Vagrant, фиксирующий действия по установке и конфигурированию DNS-сервера

# Выполнение лабораторной работы

## Установка DNS-сервера

Переход в режим суперпользователя для выполнения административных задач:

![Переход в режим суперпользователя](image/1.png){#fig-001 width=70%}

## Установка пакетов bind и bind-utils

Установка пакетов bind и bind-utils с помощью менеджера пакетов dnf:

![Установка пакетов bind и bind-utils](image/2.png){#fig-002 width=70%}

## Тестирование работы DNS

Тестовый запрос к DNS-адресу www.yandex.ru с помощью утилиты dig:

![Тестовый запрос к www.yandex.ru с помощью dig](image/3.png){#fig-003 width=70%}

## Настройка кэширующего DNS-сервера

Запуск и включение автозапуска службы named:

![Включение автозапуска и запуск службы named](image/4.png){#fig-004 width=70%}

## Настройка сетевого соединения

Вход в интерактивный редактор nmcli для eth0:

![Вход в интерактивный редактор nmcli для eth0](image/5.png){#fig-005 width=70%}

## Настройка локального DNS

Настройка DNS в nmcli для использования локального DNS-сервера:

![Настройка DNS в nmcli для eth0](image/6.png){#fig-006 width=70%}

## Перезапуск NetworkManager

Перезапуск службы NetworkManager для применения изменений:

![Перезапуск NetworkManager](image/7.png){#fig-007 width=70%}

## Конфигурация файла named.conf

Изменение настроек конфигурационного файла BIND для прослушивания всех интерфейсов:

![Изменение настроек listen-on и allow-query в /etc/named.conf](image/8.png){#fig-008 width=70%}

## Настройка межсетевого экрана

Добавление правила firewall для разрешения работы службы DNS:

![Добавление правила firewall для службы DNS](image/9.png){#fig-009 width=70%}

## Проверка работы DNS-сервера

Проверка прослушивания UDP-порта 53 процессом named:

![Проверка прослушивания UDP-порта 53 процессом named](image/10.png){#fig-010 width=70%}

## Настройка forwarders

Настройка перенаправления запросов (forwarders) для работы в сетях с фильтрацией DNS:

![Настройка перенаправления запросов (forwarders)](image/11.png){#fig-011 width=70%}

## Настройка DNSSEC

Устаревшие настройки DNSSEC (пришлось удалить):

![Устаревшие настройки DNSSEC (пришлось удалить)](image/12.png){#fig-012 width=70%}

## Создание файла зон

Копирование и переименование файла зон:

![Копирование и переименование файла зон](image/13.png){#fig-013 width=70%}

## Добавление include в named.conf

Включение файла описания зоны в основной конфигурационный файл DNS:

![Добавление include в named.conf](image/14.png){#fig-014 width=70%}

## Настройка прямой зоны

Настройка прямой зоны в файле oskalashnikova.net:

![Настройка прямой зоны в файле oskalashnikova.net](image/15.png){#fig-015 width=70%}

## Настройка обратной зоны

Настройка обратной зоны в файле oskalashnikova.net:

![Настройка обратной зоны в файле oskalashnikova.net](image/16.png){#fig-016 width=70%}

## Создание структуры каталогов

Создание каталогов для файлов зон:

![Создание каталогов для файлов зон](image/17.png){#fig-017 width=70%}

## Копирование шаблона для прямой зоны

Копирование шаблона для прямой зоны:

![Копирование шаблона для прямой зоны](image/18.png){#fig-018 width=70%}

## Содержимое файла прямой зоны

Содержимое файла прямой зоны oskalashnikova.net:

![Содержимое файла прямой зоны oskalashnikova.net](image/19.png){#fig-019 width=70%}

## Копирование шаблона для обратной зоны

Копирование шаблона для обратной зоны:

![Копирование шаблона для обратной зоны](image/20.png){#fig-020 width=70%}

## Содержимое файла обратной зоны

Содержимое файла обратной зоны 192.168.1:

![Содержимое файла обратной зоны 192.168.1](image/21.png){#fig-021 width=70%}

## Изменение владельца файлов

Изменение владельца файлов конфигурации:

![Изменение владельца файлов конфигурации](image/22.png){#fig-022 width=70%}

## Восстановление контекста SELinux

Восстановление контекста безопасности SELinux:

![Восстановление контекста SELinux](image/23.png){#fig-023 width=70%}

## Настройка SELinux для named

Настройка булевых переключателей SELinux для named:

![Настройка булевых переключателей SELinux для named](image/24.png){#fig-024 width=70%}

## Ошибка при перезапуске named

Ошибка при перезапуске named из-за устаревшей опции:

![Ошибка при перезапуске named из-за устаревшей опции](image/25.png){#fig-025 width=70%}

## Итоговое содержимое файла зон

Итоговое содержимое файла oskalashnikova.net:

![Итоговое содержимое файла oskalashnikova.net](image/26.png){#fig-026 width=70%}

## Успешный перезапуск named

Успешный перезапуск службы named после исправления конфигурации:

![Успешный перезапуск службы named](image/27.png){#fig-027 width=70%}

## Проверка работы с помощью dig

Проверка A-записи для ns.oskalashnikova.net с помощью dig:

![Проверка A-записи для ns.oskalashnikova.net с помощью dig](image/28.png){#fig-028 width=70%}

## Тестирование с помощью host

Тестирование работы DNS-сервера с помощью утилиты host:

![Тестирование работы DNS-сервера с помощью утилиты host](image/29.png){#fig-029 width=70%}

## Подготовка конфигурационных файлов

Копирование конфигурационных файлов DNS в директорию provision:

![Копирование конфигурационных файлов DNS в директорию provision](image/30.png){#fig-030 width=70%}

## Создание скрипта dns.sh

Создание исполняемого скрипта dns.sh:

![Создание исполняемого скрипта dns.sh](image/31.png){#fig-031 width=70%}

## Содержимое скрипта dns.sh

Содержимое скрипта автоматической установки DNS:

![Содержимое скрипта dns.sh](image/32.png){#fig-032 width=70%}

## Интеграция в Vagrantfile

Добавление provisioner в Vagrantfile:

![Добавление provisioner в Vagrantfile](image/33.png){#fig-033 width=70%}

# Завершение

## Выводы

В ходе выполнения лабораторной работы №2 были приобретены практические навыки по установке и конфигурированию DNS-сервера на основе BIND. Развернут полнофункциональный DNS-сервер, выполняющий две основные роли: кэширующий сервер для ускорения разрешения внешних имен и первичный авторитетный сервер для собственного домена.

## Итоги работы

1. Установлены пакеты bind и bind-utils
2. Настроен кэширующий DNS-сервер с локальным резолвингом
3. Создан первичный DNS-сервер для домена oskalashnikova.net
4. Протестирована работа сервера с помощью dig и host
5. Автоматизирован процесс развертывания через скрипт Vagrant
